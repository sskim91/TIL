#!/bin/bash
# TIL -> Obsidian ë™ê¸°í™” Hook
# ì»¤ë°‹ í›„ ìë™ìœ¼ë¡œ Obsidian ë…¸íŠ¸ í´ë”ì— ë™ê¸°í™”

OBSIDIAN_PATH="$HOME/Library/Mobile Documents/iCloud~md~obsidian/Documents/Note/09.TIL"
TIL_PATH="$(git rev-parse --show-toplevel)"

# Obsidian ê²½ë¡œê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
if [ ! -d "$OBSIDIAN_PATH" ]; then
    echo "ğŸ“ Obsidian TIL í´ë” ìƒì„±: $OBSIDIAN_PATH"
    mkdir -p "$OBSIDIAN_PATH"
fi

# rsyncë¡œ ë™ê¸°í™”
# --delete: ì†ŒìŠ¤ì—ì„œ ì‚­ì œëœ íŒŒì¼ì€ ëŒ€ìƒì—ì„œë„ ì‚­ì œ
# --exclude: git ê´€ë ¨ íŒŒì¼ ë° ìŠ¤í¬ë¦½íŠ¸ ì œì™¸
rsync -av --delete \
    "$TIL_PATH/" \
    "$OBSIDIAN_PATH/" \
    --exclude='.git' \
    --exclude='.git*' \
    --exclude='.githooks' \
    --exclude='scripts' \
    --exclude='.github' \
    --exclude='.claude' \
    --quiet

echo "âœ… Obsidian ë™ê¸°í™” ì™„ë£Œ: 09.TIL"
