#!/bin/bash
# ============================================================
# post-commit: 커밋 후 변경된 파일만 Obsidian에 동기화
# ============================================================
#
# ■ 언제 실행되나?
#   git commit 명령이 성공적으로 완료된 직후
#
# ■ 왜 --diff 모드인가?
#   커밋할 때마다 100개 파일 전부 처리하면 느림
#   변경된 파일(보통 1~5개)만 처리하면 빠름
#
# ■ 주의사항
#   - 다른 컴퓨터에서 pull 받으면 이 hook은 안 돌아감
#   - pull 후에는 post-merge hook이 전체 동기화 담당
#
# ============================================================

SCRIPT_DIR="$(cd "$(dirname "$0")" && pwd)"

# --diff 옵션: 변경된 파일만 동기화 (빠름)
python3 "$SCRIPT_DIR/sync-to-obsidian.py" --diff
